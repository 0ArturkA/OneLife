#!/bin/sh

if [ $# -lt 1 ] ; then
   echo "Usage: $0 release_name"
   exit 1
fi


rm -rf base

mkdir base


baseFolder=base/OneLife_$1

mkdir $baseFolder
mkdir $baseFolder/graphics
mkdir $baseFolder/settings
mkdir $baseFolder/languages
mkdir $baseFolder/groundTileCache
mkdir $baseFolder/reverbCache

mkdir $baseFolder/sprites
mkdir $baseFolder/objects
mkdir $baseFolder/transitions
mkdir $baseFolder/animations
mkdir $baseFolder/music
mkdir $baseFolder/sounds
mkdir $baseFolder/ground



cp ../gameSource/graphics/*.tga $baseFolder/graphics
cp ../gameSource/settings/*.ini $baseFolder/settings
cp ../gameSource/languages/*.txt $baseFolder/languages
cp ../gameSource/language.txt $baseFolder
cp ../documentation/Readme.txt $baseFolder
cp ../no_copyright.txt $baseFolder
cp ../gameSource/groundTileCache/*.tga $baseFolder/groundTileCache
cp ../gameSource/reverbCache/*.aiff $baseFolder/reverbCache


cp ../../OneLifeData6/sprites/* $baseFolder/sprites
cp ../../OneLifeData6/objects/* $baseFolder/objects
cp ../../OneLifeData6/transitions/* $baseFolder/transitions
cp ../../OneLifeData6/animations/* $baseFolder/animations
cp ../../OneLifeData6/music/* $baseFolder/music
cp ../../OneLifeData6/sounds/* $baseFolder/sounds
cp ../../OneLifeData6/ground/* $baseFolder/ground


# on mingw, symlinks in the gameSource folder are full copies
# so cache files aren't created back in the OneLifeData6 directory
if [ ! -e $baseFolder/sprites/cache.fcz ]
then
   cp ../gameSource/sprites/cache.fcz $baseFolder/sprites/
fi

if [ ! -e $baseFolder/objects/cache.fcz ]
then
   cp ../gameSource/objects/cache.fcz $baseFolder/objects/
fi

if [ ! -e $baseFolder/transitions/cache.fcz ]
then
   cp ../gameSource/transitions/cache.fcz $baseFolder/transitions/
fi

if [ ! -e $baseFolder/animations/cache.fcz ]
then
   cp ../gameSource/animations/cache.fcz $baseFolder/animations/
fi


cp ../../OneLifeData6/dataVersionNumber.txt $baseFolder/


rm -f $baseFolder/settings/email.ini
rm -f $baseFolder/settings/accountKey.ini


# remove all editor backup files
find $baseFolder -name "*~" -exec rm -f {} \;





